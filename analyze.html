<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live Ticker Analysis</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="navbar">
    <div class="container">
      <a href="index.html" class="logo">AI-Invest</a>
      <nav class="nav-links">
        <a href="index.html" class="nav-link">Home</a>
        <a href="features.html" class="nav-link">Tools</a>
        <a href="prompt.html" class="nav-link">How-To</a>
        <a href="efficient-frontier.html" class="nav-link">Efficient Frontier</a>
        <a href="dcf.html" class="nav-link">DCF</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="faq.html" class="nav-link">FAQ</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1 class="text-center">Live Ticker Analysis</h1>
    <form id="analysis-form" class="mt-2">
      <input id="ticker" type="text" placeholder="Enter stock ticker (e.g. AAPL)" required class="mb-2" />
      <button type="submit" class="btn btn-primary">Analyze</button>
    </form>
    <div id="result" class="card mt-2"></div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <nav class="footer-links">
        <a href="index.html">Home</a>
        <a href="features.html">Tools</a>
        <a href="about.html">About</a>
        <a href="mailto:info@example.com">Contact</a>
      </nav>
      <p class="tagline">Empowering investors with AI-driven tools.</p>
    </div>
  </footer>

  <script>
    const form = document.getElementById('analysis-form');
    const resultDiv = document.getElementById('result');

    form.addEventListener('submit', async e => {
      e.preventDefault();
      const ticker = document.getElementById('ticker').value.trim().toUpperCase();
      resultDiv.textContent = 'Loadingâ€¦';
      try {
        const response = await fetch('/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ ticker })
        });
        const data = await response.json();
        if (data.choices && data.choices[0].message) {
          resultDiv.textContent = data.choices[0].message.content;
        } else if (data.error) {
          resultDiv.textContent = 'Error: ' + data.error;
        } else {
          resultDiv.textContent = JSON.stringify(data, null, 2);
        }
      } catch (err) {
        resultDiv.textContent = 'Error: ' + err.message;
      }
    });
  </script>
</body>
</html>
